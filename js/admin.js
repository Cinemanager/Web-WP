// Generated by CoffeeScript 1.8.0
(function() {
  var wpt_admin_ticketspage, wpt_editor;

  wpt_editor = (function() {
    function wpt_editor() {
      this.activate_datetime_inputs();
    }

    wpt_editor.prototype.activate_datetime_inputs = function() {
      jQuery('#wpt_event_editor_event_date').datetimepicker();
      return jQuery('#wpt_event_editor_enddate').datetimepicker();
    };

    return wpt_editor;

  })();

  jQuery(function() {
    return new wpt_editor;
  });

  wpt_admin_ticketspage = (function() {
    function wpt_admin_ticketspage() {
      this.ticketspage = jQuery('select#iframepage').parents('tr');
      this.integrationstypes = jQuery("input[name='wpt_tickets[integrationtype]']");
      if (this.ticketspage.length > 0 && this.integrationstypes.length > 0) {
        this.update();
        this.integrationstypes.click((function(_this) {
          return function() {
            return _this.update();
          };
        })(this));
      }
    }

    wpt_admin_ticketspage.prototype.update = function() {
      var integrationtype;
      integrationtype = jQuery("input[name='wpt_tickets[integrationtype]']:checked").val();
      if (integrationtype === 'iframe') {
        return this.ticketspage.show(1000);
      } else {
        return this.ticketspage.hide(500);
      }
    };

    return wpt_admin_ticketspage;

  })();

  jQuery(function() {
    wpt_admin_ticketspage = new wpt_admin_ticketspage;

    /*
    	Enable datepicker in event admin form.
     */
    jQuery('.wp_theatre_datepicker').datetimepicker({
      dateFormat: 'yy-mm-dd',
      timeFormat: 'HH:mm:ss'
    });

    /*
    	Update all connected events when bulk updating productions.
    	See: http://codex.wordpress.org/Plugin_API/Action_Reference/bulk_edit_custom_box
     */
    return jQuery('#bulk_edit').live('click', function() {
      var bulk_row, post_ids, post_status;
      bulk_row = jQuery('#bulk-edit');
      post_ids = new Array();
      bulk_row.find('#bulk-titles').children().each(function() {
        return post_ids.push(jQuery(this).attr('id').replace(/^(ttle)/i, ''));
      });
      post_status = bulk_row.find('select[name="_status"]').val();
      return jQuery.ajax({
        url: ajaxurl,
        type: 'POST',
        async: false,
        cache: false,
        data: {
          action: 'save_bulk_edit_wp_theatre_prod',
          post_ids: post_ids,
          post_status: post_status
        }
      });
    });
  });

}).call(this);
